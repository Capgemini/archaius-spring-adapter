<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Archaius-Spring-Adapter by Capgemini</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Archaius-spring-adapter</h1>
        <h2>Bringing Archaius-goodness to the world of Spring</h2>
        <a href="https://github.com/Capgemini/archaius-spring-adapter" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3><a name="welcome-to-archaius-spring-adapter" class="anchor" href="#welcome-to-archaius-spring-adapter"><span class="octicon octicon-link"></span></a>Welcome to Archaius-Spring-Adapter.</h3>
<p>Welcome to the archaius-spring-adapter. As we say in the POM, our aim is to simply extend the Spring (and Camel) PropertyPlaceholders in order to support Netflix's Archaius as the single source of all property information.</p>
<p>Why would we go to this trouble? Properties can be loaded fine into Spring, and now, with the BridgePropertyPlaceholder from Camel you can use that same file for your Camel properties too.</p>
<p>But what if you want more? Specifically, the itch that we scratched was the desire to use the Netflix Hystrix circuit breakers in our Spring/Camel projects. These depend upon Archaius for their configuration, and as you need to tune them, this configuration is important. Having already got all our Camel and Spring properties in one place, why would we want to accept another properties source just for one more component in our architecture? After some googling, the archaius-spring-adapter was born.</p>
<p>At this point, it should be noted right up front that while the itch for this scratching was ours, we weren't alone. The initial example upon which this code is based can be seen in <a href="https://github.com/Netflix/archaius/issues/113">this Archaius issue thread.</a></p>
<p>We'd like to thank the guys there for their support, especially @mumrah whose gist kicked this all off and @chriswhitcombe for his technical input. We'd also like to thank them for the permission to release this code licensed under the Apache v2.0 OSS licence.</p>


<h3><a name="Getting Started" class="anchor" href="#getting-started"><span class="octicon octicon-link"></span></a>Getting Started</h3>
<p>It's dead simple to use the adapter. Just download one of the releases from this repo, or add our maven bintray repo (find the details in pom.xml) to your maven project.</p>
<p>Now you're free to start bringing in the archaius goodness. We're (still) using Spring XML config and all you need do if you have Spring alone (i.e. no Camel) is something like:</p>
<pre>
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- Config loading via Spring-Archaius-->
    <bean class="com.capgemini.archaius.spring.ArchaiusPropertyPlaceholderConfigurer">
        <property name="location" value="classpath:/META-INF/system.properties" />
    </bean>
</beans>
</pre> 
<p>The "location" property works just as you would expect it to. By this we mean you can have an ordered list of properties files:</p>
<code>
<!-- Config loading via Spring-Archaius-->
<bean class="com.capgemini.archaius.spring.ArchaiusPropertyPlaceholderConfigurer">
    <property name="locations">
        <list>
            <value>classpath:/META-INF/system.properties</value>
            <value>classpath:/META-INF/even-more-system.properties</value>
        </list>
    </property>
</bean>
</code>
<p>With property overloading as you'd expect from standard Spring properties.</p>
<p>Additionally, and again as Spring users will expect, you can let Spring know whether it can ignore missing resource files:</p>
<code>
<bean class="com.capgemini.archaius.spring.ArchaiusPropertyPlaceholderConfigurer">
    <property name="ignoreResourceNotFound" value="false" />
    <property name="locations">
        <list>
            <value>classpath:/META-INF/system.properties</value>
            <value>classpath:/META-INF/file-not-there.properties</value>
        </list>
    </property>
</bean>
</code>
<p>If you're using Camel, everything in the above examples works as you'd expect, but you need to use a different bean class:</p>
<code>
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                           http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring-2.12.2.xsd">

    <!-- Config loading via Spring-Archaius-->
    <bean class="com.capgemini.archaius.spring.ArchaiusBridgePropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:/META-INF/system.properties</value>
                <value>classpath:/META-INF/file-not-there.properties</value>
            </list>
        </property>
        <property name="ignoreResourceNotFound" value="true" />
    </bean>

    <camel:camelContext id="camel" />
</beans>
</code>
<p>That's it!</p>

<h3><a name="getting-involved" class="anchor" href="#getting-involved"><span class="octicon octicon-link"></span></a>Getting Involved</h3>
<p>We're patently working on support to solve our own problems first, but it's also clear that there is much more we could add to this project. We'd love to have contributions from folks in all the standard ways:</p>
<ul>
<li>Questions and Answers via the Google Group - https://groups.google.com/forum/#!forum/archaius-spring-adapter</li>
<li>Issue Reports via GitHub</li>
<li>Pull Requests (fixes, more tests, new features, typo-corrections etc) via GitHub (we follow the standard workflow)</li>
<li>Wiki documentation</li>
</ul>
<p>We maintain a list of the issues that we're working on as you'd expect. By looking there you can see what our priorities are. Please feel free to comment on any of them or add more.</p>

<h3><a name="Contributors" class="anchor" href="#contributors"><span class="octicon octicon-link"></span></a>Contributors</h3>
<ul>
  <li>@andrewharmellaw</li>
<li>@gayathu-rajan</li>
<li>@nickjwalter</li>
<li>@rart</li>
<li>@sanjaykumar81</li>
</ul>
</section>


        <aside id="sidebar">
          <a href="https://github.com/Capgemini/archaius-spring-adapter/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/Capgemini/archaius-spring-adapter/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>
          <a href="https://buildhive.cloudbees.com/job/Capgemini/job/archaius-spring-adapter/" class="button">
            <small>Cloudbees Jenkins </small>
            <img src="https://buildhive.cloudbees.com/job/Capgemini/job/archaius-spring-adapter/badge/icon" alt="Jenkins Build Status">
          </a>

          <p class="repo-owner"><a href="https://github.com/Capgemini/archaius-spring-adapter">archaius-spring-adapter</a> is maintained by <a href="https://github.com/Capgemini">Capgemini</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-50402698-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
